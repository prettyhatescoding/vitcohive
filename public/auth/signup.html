<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CoHive - VIT Student Signup</title>
  
  <!-- Gen-Z Style Meta -->
  <meta name="theme-color" content="#6c5ce7">
  <meta name="description" content="Join CoHive - VIT's exclusive platform to find project partners">
  
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* CoHive - Gen-Z Signup Page Styles */
    :root {
      --purple: #6c5ce7;
      --pink: #fd79a8;
      --teal: #00cec9;
      --yellow: #ffeaa7;
      --dark: #1a1a2e;
      --light: #f8f9fa;
      --gradient: linear-gradient(135deg, var(--purple), var(--pink));
    }
    
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background-color: var(--light);
      color: var(--dark);
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    
    h1, h2, h3, h4, h5 {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 700;
      margin-top: 0;
    }
    
    /* Navigation */
    .navbar {
      background: rgba(255, 255, 255, 0.8) !important;
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      padding: 1rem 0;
    }
    
    .navbar-brand {
      font-weight: 800;
      font-size: 1.8rem;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .nav-link {
      font-weight: 600;
      color: var(--dark) !important;
      margin: 0 0.5rem;
      position: relative;
    }
    
    .nav-link.active {
      color: var(--purple) !important;
    }
    
    .nav-link:hover:after {
      width: 100%;
    }
    
    .nav-link:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 3px;
      background: var(--gradient);
      transition: width 0.3s ease;
    }
    
    /* VIT Banner */
    .vit-banner {
      background: var(--gradient);
      color: white;
      padding: 0.75rem 0;
      text-align: center;
    }
    
    /* Auth Container */
    .auth-container {
      min-height: calc(100vh - 200px);
      display: flex;
      align-items: center;
      padding: 3rem 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%236c5ce7' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    
    /* Auth Card */
    .auth-card {
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      border: none;
    }
    
    .auth-card .card-header {
      background: var(--gradient);
      color: white;
      padding: 1.5rem;
      border-bottom: none;
    }
    
    .auth-card .card-body {
      padding: 2rem;
    }
    
    /* Form Styles */
    .form-label {
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: block;
    }
    
    .form-control {
      border-radius: 8px;
      padding: 0.75rem 1rem;
      border: 1px solid #ced4da;
      transition: all 0.3s ease;
    }
    
    .form-control:focus {
      border-color: var(--purple);
      box-shadow: 0 0 0 0.25rem rgba(108, 92, 231, 0.25);
    }
    
    .input-group-text {
      background-color: rgba(108, 92, 231, 0.1);
      border-color: #ced4da;
      color: var(--purple);
    }
    
    .btn-outline-secondary {
      border-radius: 0 8px 8px 0 !important;
    }
    
    .form-text {
      font-size: 0.85rem;
      color: #6c757d;
      margin-top: 0.25rem;
    }
    
    .form-check-input:checked {
      background-color: var(--purple);
      border-color: var(--purple);
    }
    
    /* Radio Buttons */
    .form-check-input[type="radio"] {
      width: 1.2em;
      height: 1.2em;
      margin-top: 0.15em;
    }
    
    .form-check-label {
      margin-left: 0.5rem;
    }
    
    /* Select Dropdown */
    .form-select {
      border-radius: 8px;
      padding: 0.75rem 1rem;
    }
    
    /* Buttons */
    .btn {
      font-weight: 600;
      border-radius: 50px;
      padding: 0.75rem 1.5rem;
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background: var(--gradient);
      border: none;
      box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(108, 92, 231, 0.4);
    }
    
    /* Benefits Card */
    .benefits-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
      height: 100%;
      border: 1px solid rgba(0, 0, 0, 0.05);
      padding: 2rem;
    }
    
    .benefit-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 1.5rem;
    }
    
    .benefit-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--gradient);
      color: white;
      flex-shrink: 0;
      margin-right: 1rem;
    }
    
    /* Password Strength */
    .password-strength {
      height: 6px;
      background: #e9ecef;
      border-radius: 3px;
      overflow: hidden;
      margin-top: 0.5rem;
      position: relative;
    }
    
    .password-strength:before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 0;
      background: var(--pink);
      transition: width 0.3s ease;
    }
    
    .password-strength.very-weak:before {
      width: 20%;
      background: #dc3545;
    }
    
    .password-strength.weak:before {
      width: 40%;
      background: #fd7e14;
    }
    
    .password-strength.medium:before {
      width: 60%;
      background: #ffc107;
    }
    
    .password-strength.strong:before {
      width: 80%;
      background: #20c997;
    }
    
    .password-strength.very-strong:before {
      width: 100%;
      background: #198754;
    }
    
    /* Footer */
    footer {
      background: var(--dark);
      color: white;
      padding: 3rem 0 1.5rem;
    }
    
    .footer-links a {
      color: rgba(255, 255, 255, 0.7);
      transition: all 0.3s ease;
      display: inline-block;
      margin-bottom: 0.5rem;
    }
    
    .footer-links a:hover {
      color: white;
      transform: translateX(5px);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .auth-container {
        padding: 2rem 0;
      }
      
      .auth-card .card-body {
        padding: 1.5rem;
      }
      
      .navbar-collapse {
        background: rgba(255, 255, 255, 0.95);
        padding: 1rem;
        border-radius: 8px;
        margin-top: 0.5rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      
      .nav-link {
        margin: 0.5rem 0;
      }
      
      .d-flex.flex-wrap.gap-4 {
        gap: 1rem !important;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="/">CoHive</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
       <!-- In your navbar (replace existing nav items) -->
<ul class="navbar-nav ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="/">Home</a>
  </li>
  <!-- Show these when NOT logged in -->
  <li class="nav-item" id="loginNavItem">
    <a class="nav-link" href="/auth/login.html">Login</a>
  </li>
  <li class="nav-item" id="signupNavItem">
    <a class="nav-link" href="/auth/signup.html">Sign Up</a>
  </li>
  <!-- Show these when logged in -->
  <li class="nav-item d-none" id="dashboardNavItem">
    <a class="nav-link" href="/dashboard">Dashboard</a>
  </li>
  <li class="nav-item d-none" id="logoutNavItem">
    <a class="nav-link" href="#" id="logoutLink">Logout</a>
  </li>
</ul>
      </div>
    </div>
  </nav>

  <!-- VIT Banner -->
  <div class="vit-banner text-center">
    <div class="container">
      <p class="mb-0"><i class="fas fa-university me-2"></i>Exclusively for VIT Students - Find Your Perfect Project Partners</p>
    </div>
  </div>

  <!-- Signup Form -->
  <div class="auth-container">
    <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
          <div class="card auth-card shadow">
            <div class="card-header">
              <h3 class="mb-0"><i class="fas fa-user-plus me-2"></i>VIT Student Signup</h3>
            </div>
            <div class="card-body">
              <div class="text-center mb-4">
                <p class="text-muted">Join the VIT student collaboration community</p>
              </div>
              <form method="POST" action="/signup">
            <div class="mb-3">
              <label for="name" class="form-label">Full Name</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                    <input type="text" class="form-control" id="name" name="name" required>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="regNo" class="form-label">VIT Registration Number</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                    <input type="text" class="form-control" id="regNo" name="regNo" pattern="[0-9]{2}[A-Z]{3}[0-9]{4}" title="Please enter a valid VIT registration number (e.g., 23BIT0232)" placeholder="e.g., 23BIT0232" required>
                  </div>
                  <div class="form-text">Format: YY[Department][Number] (e.g., 23BIT0232)</div>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">VIT Email</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                    <input type="email" class="form-control" id="email" name="email" 
                           pattern="[a-zA-Z0-9.]+@vitstudent\.ac\.in"
                           title="Please enter a valid VIT student email" 
                           placeholder="username@vitstudent.ac.in" required>
                  </div>
                  <div id="email-error" class="invalid-feedback">
                    Please enter a valid VIT student email (username@vitstudent.ac.in)
                  </div>
                  <div class="form-text">Must be a valid VIT student email</div>
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    <input type="password" class="form-control" id="password" name="password" required>
                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                  <div class="password-strength mt-2" id="passwordStrength"></div>
                </div>
                <div class="mb-3">
                  <label class="form-label">Year</label>
                  <div class="d-flex flex-wrap gap-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="year" id="year1" value="1" required>
                      <label class="form-check-label" for="year1">1st Year</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="year" id="year2" value="2">
                      <label class="form-check-label" for="year2">2nd Year</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="year" id="year3" value="3">
                      <label class="form-check-label" for="year3">3rd Year</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="year" id="year4" value="4">
                      <label class="form-check-label" for="year4">4th Year</label>
                    </div>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="department" class="form-label">Department</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-graduation-cap"></i></span>
                    <select class="form-select" id="department" name="department" required>
                      <option value="" selected disabled>Select your department</option>
                      <option value="CSE">Computer Science Engineering</option>
                      <option value="ECE">Electronics and Communication Engineering</option>
                      <option value="EEE">Electrical and Electronics Engineering</option>
                      <option value="MECH">Mechanical Engineering</option>
                      <option value="CIVIL">Civil Engineering</option>
                      <option value="IT">Information Technology</option>
                      <option value="AUTO">Automobile Engineering</option>
                      <option value="CHEM">Chemical Engineering</option>
                      <option value="BIOTECH">Biotechnology</option>
                      <option value="FOOD">Food Technology</option>
                      <option value="TEXTILE">Textile Technology</option>
                      <option value="PROD">Production Engineering</option>
                      <option value="META">Metallurgical Engineering</option>
                      <option value="MINING">Mining Engineering</option>
                      <option value="AGRI">Agricultural Engineering</option>
                      <option value="ARCH">Architecture</option>
                      <option value="PLAN">Planning</option>
                      <option value="BCA">BCA</option>
                      <option value="MCA">MCA</option>
                      <option value="BSC">BSc</option>
                      <option value="MSC">MSc</option>
                      <option value="BBA">BBA</option>
                      <option value="MBA">MBA</option>
                      <option value="LAW">Law</option>
                      <option value="PHARMA">Pharmacy</option>
                      <option value="OTHER">Other</option>
                    </select>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="interests" class="form-label">Project Interests (Optional)</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-tags"></i></span>
                    <input type="text" class="form-control" id="interests" name="interests" placeholder="e.g., Web Development, AI, IoT, etc.">
                  </div>
                  <div class="form-text">Separate multiple interests with commas</div>
                </div>
                <div class="mb-3 form-check">
                  <input type="checkbox" class="form-check-input" id="terms" required>
                  <label class="form-check-label" for="terms">I agree to the <a href="#">Terms and Conditions</a></label>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                  <i class="fas fa-user-plus me-2"></i>Sign Up
                </button>
              </form>
              <div class="text-center mt-4">
                <p class="mb-0">Already have an account? <a href="login.html" class="fw-bold">Login here</a></p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Signup Benefits -->
        <div class="col-md-5 d-none d-md-block">
          <div class="benefits-card">
            <h4 class="mb-4 text-center">Join the VIT Project Community</h4>
            
            <div class="benefit-item">
              <div class="benefit-icon">
                <i class="fas fa-project-diagram"></i>
              </div>
              <div>
                <h5 class="mb-1">Find Project Partners</h5>
                <p class="text-muted mb-0">Connect with students who share your interests and project goals.</p>
              </div>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-icon">
                <i class="fas fa-users"></i>
              </div>
              <div>
                <h5 class="mb-1">Build Your Network</h5>
                <p class="text-muted mb-0">Expand your professional network within the VIT community.</p>
              </div>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-icon">
                <i class="fas fa-laptop-code"></i>
              </div>
              <div>
                <h5 class="mb-1">Enhance Your Skills</h5>
                <p class="text-muted mb-0">Work on diverse projects to improve your technical and soft skills.</p>
              </div>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-icon">
                <i class="fas fa-certificate"></i>
              </div>
              <div>
                <h5 class="mb-1">Build Your Portfolio</h5>
                <p class="text-muted mb-0">Complete projects to showcase your abilities to potential employers.</p>
              </div>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-icon">
                <i class="fas fa-comments"></i>
              </div>
              <div>
                <h5 class="mb-1">Share Knowledge</h5>
                <p class="text-muted mb-0">Learn from peers and share your expertise to create better projects together.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-6 mb-4">
          <h5><i class="fas fa-cubes me-2"></i>CoHive</h5>
          <p>A project collaboration platform exclusively for VIT students.</p>
        </div>
        <div class="col-md-3 mb-4">
          <h5>Links</h5>
          <ul class="list-unstyled footer-links">
            <li><a href="/">Home</a></li>
            <li><a href="/auth/login.html">Login</a></li>
            <li><a href="/auth/signup.html">Sign Up</a></li>
          </ul>
        </div>
        <div class="col-md-3 mb-4">
          <h5>Contact</h5>
          <ul class="list-unstyled footer-links">
            <li><a href="mailto:support@cohive.com">support@cohive.com</a></li>
            <li>VIT University</li>
          </ul>
        </div>
      </div>
      <hr class="bg-secondary">
      <div class="row">
        <div class="col-12 text-center">
          <p class="mb-0"> 2025 CoHive | VIT Project Collaboration Platform</p>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Toggle password visibility
    document.getElementById('togglePassword').addEventListener('click', function() {
      const passwordInput = document.getElementById('password');
      const icon = this.querySelector('i');
      
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        passwordInput.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    });

    // Check password strength
    document.getElementById('password').addEventListener('input', function() {
      const password = this.value;
      const strengthIndicator = document.getElementById('passwordStrength');
      const strengthText = document.getElementById('passwordStrengthText');
      
      if (!strengthIndicator || !strengthText) return; // Guard against null elements
      
      let strength = 0;
      if (password.length >= 8) strength++;
      if (password.match(/[a-z]/)) strength++;
      if (password.match(/[A-Z]/)) strength++;
      if (password.match(/[0-9]/)) strength++;
      if (password.match(/[^a-zA-Z0-9]/)) strength++;
      
      const strengthClasses = ['bg-danger', 'bg-warning', 'bg-info', 'bg-primary', 'bg-success'];
      const strengthLabels = ['Very Weak', 'Weak', 'Medium', 'Strong', 'Very Strong'];
      
      if (strength > 0) {
        strengthIndicator.className = 'progress-bar ' + strengthClasses[strength - 1];
        strengthIndicator.style.width = (strength * 20) + '%';
        strengthText.textContent = strengthLabels[strength - 1];
      } else {
        strengthIndicator.className = 'progress-bar';
        strengthIndicator.style.width = '0%';
        strengthText.textContent = '';
      }
    });

    // Real-time email validation
    const emailInput = document.getElementById('email');
    const emailError = document.getElementById('email-error');
    
    emailInput.addEventListener('input', function() {
      const emailRegex = /^[a-zA-Z0-9.]+@vitstudent\.ac\.in$/;
      const isValid = emailRegex.test(this.value);
      
      if (this.value && !isValid) {
        this.classList.add('is-invalid');
        emailError.style.display = 'block';
      } else {
        this.classList.remove('is-invalid');
        emailError.style.display = 'none';
      }
    });

    // Handle form submission
    const signupForm = document.querySelector('form');
    signupForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Get all form fields
      const name = document.getElementById('name').value.trim();
      const regNo = document.getElementById('regNo').value.trim();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const yearValue = document.querySelector('input[name="year"]:checked')?.value;
      const department = document.getElementById('department').value;

      // Validate name
      if (!name) {
        showError('Please enter your name');
        document.getElementById('name').classList.add('is-invalid');
        return;
      }

      // Validate registration number format
      const regNoRegex = /^[0-9]{2}[A-Z]{3}[0-9]{4}$/;
      if (!regNo || !regNoRegex.test(regNo)) {
        showError('Registration number must be in the format: 21BCE1234');
        document.getElementById('regNo').classList.add('is-invalid');
        return;
      }
      
      // Validate email format
      const emailRegex = /^[a-zA-Z0-9.]+@vitstudent\.ac\.in$/;
      if (!email || !emailRegex.test(email)) {
        showError('Please enter a valid VIT student email');
        emailInput.classList.add('is-invalid');
        emailError.style.display = 'block';
        return;
      }
      
      // Validate password
      if (!password || password.length < 8) {
        showError('Password must be at least 8 characters long');
        document.getElementById('password').classList.add('is-invalid');
        return;
      }
      
      // Validate year
      if (!yearValue || isNaN(parseInt(yearValue)) || parseInt(yearValue) < 1 || parseInt(yearValue) > 4) {
        showError('Please select a valid year (1-4)');
        return;
      }
      
      // Validate department
      if (!department) {
        showError('Please select a department');
        document.getElementById('department').classList.add('is-invalid');
        return;
      }

      const formData = {
        name: name,
        regNo: regNo,
        email: email,
        password: password,
        year: parseInt(yearValue),
        department: department
      };

      const submitBtn = document.querySelector('button[type="submit"]');
      const originalBtnText = submitBtn.innerHTML;

      try {
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating account...';

        const response = await fetch('/api/register', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        const data = await response.json();

        if (!response.ok) {
          throw new Error(data.error || 'Registration failed');
        }

        // Store token and user data
        localStorage.setItem('token', data.token);
        localStorage.setItem('user', JSON.stringify(data.student));
        
        // Redirect to dashboard
        window.location.replace('/dashboard.html');
      } catch (error) {
        console.error('Registration error:', error);
        showError(error.message || 'Registration failed. Please try again.');
      } finally {
        // Reset button state
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
      }
    });

    // Check if user is already logged in
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const response = await fetch('/api/check-session', {
          credentials: 'include'
        });
        
        if (response.ok) {
          const data = await response.json();
          if (data.success) {
            window.location.href = '/dashboard.html';
          }
        }
      } catch (err) {
        console.error('Auth check failed:', err);
        // Don't show error to user, just continue with normal page load
      }
    });
  </script>
</body>
</html>